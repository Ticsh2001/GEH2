<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–¥–∞–∫—Ç–æ—Ä –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <div id="menu">
            <button class="menu-btn" id="btn-new">üìÑ –ù–æ–≤—ã–π</button>
            <button class="menu-btn" id="btn-save">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button class="menu-btn" id="btn-load">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
            <button class="menu-btn" id="btn-generate-code">üß© –ö–æ–¥</button>
            <button class="menu-btn" id="btn-project-settings">‚öôÔ∏è –°–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞</button>
            <div class="menu-separator"></div>
            <div class="zoom-controls">
                <button class="menu-btn zoom-btn" id="btn-zoom-out">‚àí</button>
                <span id="zoom-level">100%</span>
                <button class="menu-btn zoom-btn" id="btn-zoom-in">+</button>
                <button class="menu-btn" id="btn-zoom-fit">‚ä° –í–ø–∏—Å–∞—Ç—å</button>
                <button class="menu-btn" id="btn-zoom-reset">1:1</button>
            </div>
            <input type="file" id="file-input" accept=".json">
        </div>

        <div id="main">
            <div id="palette">
                <h3>üì¶ –≠–ª–µ–º–µ–Ω—Ç—ã</h3>

                <div class="palette-section">
                    <div class="palette-section-title">–í–•–û–î–´</div>

                    <div class="palette-item" data-type="input-signal">
                        <svg viewBox="0 0 60 40">
                            <polygon points="0,5 40,5 55,20 40,35 0,35" fill="#0f3460" stroke="#4a90d9" stroke-width="2"/>
                            <text x="12" y="24" fill="#eee" font-size="10">IN</text>
                        </svg>
                        <div class="palette-item-name">–í—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª</div>
                    </div>
                </div>
                <div class="palette-section">
                    <div class="palette-section-title">–í–´–•–û–î–´</div>

                    <div class="palette-item" data-type="output">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="5" width="50" height="30" rx="6" fill="none" stroke="#10b981" stroke-width="2" stroke-dasharray="4,2"/>
                            <text x="12" y="24" fill="#10b981" font-size="9">–í–´–•–û–î</text>
                        </svg>
                        <div class="palette-item-name">–í—ã—Ö–æ–¥</div>
                    </div>
                </div>

                <div class="palette-section">
                    <div class="palette-section-title">–õ–û–ì–ò–ß–ï–°–ö–ò–ï</div>

                    <div class="palette-item" data-type="and">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="5" width="50" height="30" rx="5" fill="#0f3460" stroke="#a855f7" stroke-width="2"/>
                            <text x="22" y="25" fill="#eee" font-size="12" font-weight="bold">–ò</text>
                        </svg>
                        <div class="palette-item-name">–ò (AND)</div>
                    </div>

                    <div class="palette-item" data-type="or">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="5" width="50" height="30" rx="5" fill="#0f3460" stroke="#a855f7" stroke-width="2"/>
                            <text x="12" y="25" fill="#eee" font-size="11" font-weight="bold">–ò–õ–ò</text>
                        </svg>
                        <div class="palette-item-name">–ò–õ–ò (OR)</div>
                    </div>

                    <div class="palette-item" data-type="not">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="5" width="50" height="30" rx="5" fill="#0f3460" stroke="#a855f7" stroke-width="2"/>
                            <text x="12" y="25" fill="#eee" font-size="11" font-weight="bold">–ù–ï–¢</text>
                        </svg>
                        <div class="palette-item-name">–ù–ï–¢ (NOT)</div>
                    </div>
                </div>

                <div class="palette-section">
                    <div class="palette-section-title">–°–†–ê–í–ù–ï–ù–ò–ï</div>

                    <div class="palette-item" data-type="if">
                        <svg viewBox="0 0 60 40">
                            <polygon points="30,3 57,20 30,37 3,20" fill="#0f3460" stroke="#e94560" stroke-width="2"/>
                            <text x="14" y="24" fill="#eee" font-size="9" font-weight="bold">–ï–°–õ–ò</text>
                        </svg>
                        <div class="palette-item-name">–ï–°–õ–ò (IF)</div>
                    </div>
                </div>

                <div class="palette-section">
                    <div class="palette-section-title">–†–ê–ó–í–ï–¢–í–õ–ï–ù–ò–ï</div>

                    <div class="palette-item" data-type="separator">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="8" width="50" height="24" rx="3" fill="#0f3460" stroke="#f59e0b" stroke-width="2"/>
                            <text x="8" y="25" fill="#f59e0b" font-size="10" font-weight="bold">‚úì/‚úó</text>
                        </svg>
                        <div class="palette-item-name">–°–µ–ø–∞—Ä–∞—Ç–æ—Ä</div>
                    </div>
                </div>                

                <div class="palette-section">
                    <div class="palette-section-title">–ó–ù–ê–ß–ï–ù–ò–Ø</div>

                    <div class="palette-item" data-type="const">
                        <svg viewBox="0 0 60 40">
                            <rect x="10" y="8" width="40" height="24" rx="3" fill="#0f3460" stroke="#3b82f6" stroke-width="2"/>
                            <text x="24" y="25" fill="#3b82f6" font-size="14" font-weight="bold">C</text>
                        </svg>
                        <div class="palette-item-name">–ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞</div>
                    </div>

                    <div class="palette-item" data-type="formula">
                        <svg viewBox="0 0 60 40">
                            <rect x="5" y="5" width="50" height="30" rx="5" fill="#0f3460" stroke="#f59e0b" stroke-width="2"/>
                            <text x="12" y="25" fill="#f59e0b" font-size="11" font-weight="bold">f(x)</text>
                        </svg>
                        <div class="palette-item-name">–§–æ—Ä–º—É–ª–∞</div>
                    </div>
                </div>

                <div class="type-legend">
                    <div class="type-legend-item">
                        <div class="type-legend-dot logic"></div>
                        <span>–õ–æ–≥–∏—á–µ—Å–∫–∏–π</span>
                    </div>
                    <div class="type-legend-item">
                        <div class="type-legend-dot number"></div>
                        <span>–ß–∏—Å–ª–æ–≤–æ–π</span>
                    </div>
                </div>
            </div>

            <div id="workspace-container">
                <svg id="connections-svg"></svg>
                <div id="workspace"></div>
                  <!-- –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ -->
                <div id="selection-rect"></div>

                <!-- –ú–∏–Ω–∏-–∫–∞—Ä—Ç–∞ -->
                <div id="minimap">
                    <div id="minimap-viewport"></div>
                    <canvas id="minimap-canvas"></canvas>
                </div>

                <!-- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div id="viewport-info">
                    <span id="cursor-pos">X: 0, Y: 0</span>
                    <span id="selection-info"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="modal-overlay">
        <div id="modal">
            <h3 id="modal-title">–°–≤–æ–π—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞</h3>
            <div id="modal-content"></div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn save" id="modal-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–≤–æ–π—Å—Ç–≤ –ø—Ä–æ–µ–∫—Ç–∞ -->
    <div id="project-modal-overlay" class="modal-overlay-class">
        <div id="project-modal" class="modal-class">
            <h3>–°–≤–æ–π—Å—Ç–≤–∞ –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <div id="project-modal-content"></div>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="project-modal-cancel">–û—Ç–º–µ–Ω–∞</button>
                <button class="modal-btn save" id="project-modal-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="code-modal-overlay" class="modal-overlay-class">
        <div id="code-modal" class="modal-class">
            <h3>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥</h3>
            <textarea id="code-output" style="width:100%; height:300px;"></textarea>
            <div class="modal-buttons">
                <button class="modal-btn cancel" id="code-modal-close">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <div id="context-menu">
        <div class="context-item" id="ctx-properties">‚öôÔ∏è –°–≤–æ–π—Å—Ç–≤–∞</div>
        <div class="context-item" id="ctx-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</div>
    </div>

   <!-- –ú–æ–¥—É–ª–∏ JavaScript -->
    <!-- –ú–æ–¥—É–ª–∏ JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/viewport.js"></script>
    <script src="js/elements.js"></script>
    <script src="js/connections.js"></script>
    <script src="js/outputs.js"></script>  <!-- ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω —Ç–µ–ø–µ—Ä—å -->
    <script src="js/modal.js"></script>
    <script src="js/project.js"></script>
    <script src="js/codegen_graph.js"></script>
    <script src="js/codegen_optimizer.js"></script>
    <script src="js/codegen.js"></script>
    <script src="js/settings.js"></script>
   
    <script src="js/app.js"></script>
</body>
</html>